import pytest

from interfaces.api.Lastfm import Client

@pytest.fixture
def client():
    return Client("")

@pytest.mark.parametrize(
    "cname, durations, discogs_id",
    [
        (
            "DubSquad - Remember Thiszzz (1999)",
            ["379.707", "362.352"],
            "https://www.last.fm/music/dubsquad/remember%2bthiszzz%253f"
        ),
        (
            "Duran Duran - Come Undone (1993)",
            ["280.16", "443.533", "490.373", "271.893"],
            ""
        ),
        (
            "Afrika Bambaataa - Planet Rock CDS (1993)",
            ["382.24", "68.4", "552.16"],
            ""
        ),
        (
            "Paradisio - Bailando CDM (1996)",
            ["230.8", "412.6", "414.6", "412.667", "413.067",
             "425.0"],
            ""
        ),
        (
            "Paradisio - Bailando CDMS (1997)",
            ["230.347", "409.92", "410.893", "410.147", "303.293"],
            ""
        ),
        (
            "Beat Checkazz x Bass N Pulse - Tekkno Bahia CDM (2003)",
            ["207.333", "202.467", "201.467", "424.0", "389.56",
             "392.733", "351.667", "354.067", "107.333"],
            ""
        ),
        (
            "Ace of Base - Beautiful Life The Singles (2023)",
            ['223.0', '252.507', '327.0', '279.267', '240.6',
             '232.821', '224.533', '326.787', '201.136', '224.0',
             '224.0', '211.213', '253.2', '257.12', '406.027',
             '214.053', '240.841', '449.122', '459.533', '201.692',
             '212.373', '227.36', '401.64', '341.733', '241.12',
             '276.707', '255.413', '230.156', '281.312', '179.016',
             '238.033', '238.033', '227.509', '226.996', '216.2',
             '231.56', '388.867', '294.951', '320.347', '255.529',
             '191.04', '238.533', '284.733', '308.707', '342.773',
             '408.533', '206.3', '300.401', '206.3', '300.401',
             '195.257', '337.688', '195.257', '188.87', '315.385',
             '263.16', '221.093', '230.187', '356.96', '400.443',
             '319.2', '223.381', '446.307', '217.627', '221.077',
             '426.672', '426.672', '232.987', '193.0', '201.307',
             '218.933', '299.8', '223.0', '244.773', '355.963',
             '533.2', '300.739', '277.563', '618.144', '253.76',
             '191.902', '269.909', '250.848', '175.747', '176.0',
             '175.013', '290.627', '343.427', '221.312', '252.32',
             '215.632', '364.067', '429.067', '436.268', '682.067',
             '165.999', '221.187', '348.6', '284.619', '217.851',
             '421.76', '220.679', '500.307', '341.666', '227.187',
             '417.16', '503.973', '477.285', '405.397', '198.547',
             '394.107', '242.293', '198.0', '408.333', '403.168',
             '250.927', '505.333', '435.427', '503.941', '326.853',
             '388.437', '229.648', '221.013', '193.307', '439.0',
             '376.57', '229.648', '439.001', '351.957', '184.836',
             '349.205', '183.995', '199.808', '216.555', '208.501',
             '227.04', '215.16', '344.307', '212.213', '318.8',
             '238.763', '376.64', '465.16', '319.733', '314.467',
             '220.997', '312.421', '220.101', '212.989', '183.093',
             '232.251', '214.36', '247.333', '210.893', '201.84',
             '222.453', '629.227', '581.619', '217.6', '200.156',
             '211.429', '491.937', '229.493', '359.029', '262.156',
             '211.453', '228.76', '228.413', '203.467', '207.573',
             '196.973', '181.536', '199.806', '222.893', '535.667',
             '201.483', '279.456', '221.097', '251.413', '216.133',
             '243.84', '249.645', '335.467', '249.644', '217.587',
             '442.52', '461.499', '440.652', '461.499', '223.019',
             '207.771', '247.92', '213.919', '226.04', '217.493',
             '185.279', '243.933', '357.787', '229.52', '234.133',
             '239.568', '236.24', '234.678', '253.013', '426.987',
             '254.581', '255.959', '262.333', '262.959', '631.211',
             '546.517', '256.197', '535.072', '290.0', '290.0',
             '209.614', '216.5', '273.165', '247.525', '305.147',
             '213.792', '234.813', '209.614', '207.0', '203.985',
             '237.667', '236.512', '300.992', '300.229', '452.361',
             '452.359', '441.698', '441.7', '255.493', '285.693',
             '225.792', '438.789', '209.394', '771.601', '214.397',
             '240.067', '239.584', '768.801', '172.133', '186.0',
             '171.227', '288.933', '368.432', '364.302', '234.909',
             '203.216', '196.789', '222.632', '222.632', '200.991',
             '208.204', '208.203', '181.187', '224.667', '167.76',
             '296.398', '177.181', '315.42', '213.891', '179.954',
             '166.065', '295.995', '195.049', '210.961', '226.08',
             '183.693', '199.029', '562.07', '489.332', '181.52',
             '223.054', '195.093', '169.08', '185.2', '323.003',
             '198.787', '408.08', '408.653', '208.987', '326.107',
             '357.667', '216.873', '193.768', '192.002', '195.995',
             '170.467', '300.369', '188.543', '300.37', '414.339',
             '359.528', '192.2', '195.995', '184.725', '226.882',
             '358.455', '192.352', '187.05', '219.68', '415.704',
             '486.357', '292.053', '378.022', '361.064', '291.048',
             '341.234', '235.121', '361.54', '384.456'],
            ""
        )
    ]
)
def test_search(cname, durations, url, client):
    result = client.search(cname, durations)
    assert url == result.get_url()